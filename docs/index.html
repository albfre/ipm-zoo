<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interior-Point Methods Zoo</title>
  <link rel="stylesheet" href="styles.css">
  <script>
    MathJax = {
      tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
      svg: { fontCache: 'global' }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>

<body>
  <img style="float: left;" src="square-title.svg" height="120">

  <div class="container">
    <!-- Input Section (Left) -->
    <div class="section">
      <h3>Inequalities</h3>
      <label><input type="radio" name="inequalities" value="none"> None</label>
      <label><input type="radio" name="inequalities" value="below"> Inequalities from below</label>
      <label><input type="radio" name="inequalities" value="above"> Inequalities from above</label>
      <label><input type="radio" name="inequalities" value="both" checked> Inequalities from below and above</label>
      <br>
      <h3>Equalities</h3>
      <label><input type="checkbox" id="equalities"> Include Equalities</label>
      <br>
      <h3>Variable Bounds</h3>
      <label><input type="radio" name="variable_bounds" value="none"> None</label>
      <label><input type="radio" name="variable_bounds" value="lower"> Lower</label>
      <label><input type="radio" name="variable_bounds" value="upper"> Upper</label>
      <label><input type="radio" name="variable_bounds" value="both" checked> Lower and upper</label>
      <br>
      <h3>Handling of Inequalities</h3>
      <label><input type="radio" name="handling_inequalities" value="slacks" checked> Slacks</label>
      <br>
      <h3>Handling of Equalities</h3>
      <label><input type="radio" name="handling_equalities" value="indefinite" checked> Indefinite
        factorization</label>
      <label><input type="radio" name="handling_equalities" value="slacks"> Slacks</label>
      <label><input type="radio" name="handling_equalities" value="penalty"> Penalty function</label>
    </div>

    <!-- Output Section (Right) -->
    <div class="output" id="output">
      <h3>Problem Formulation</h3>
      <p>Select options to see the formulation here.</p>
    </div>
  </div>

  <script>
    const Aineq = "A";
    const lAineq = "l_{A}";
    const uAineq = "u_{A}";
    const Aeq = "A_{\\text{eq}}";
    const beq = "b";
    const lx = "l_x";
    const ux = "u_x";
    const x = "x";

    function updateProblem() {
      let inequalities = document.querySelector('input[name="inequalities"]:checked').value;
      let handlingInequalities = "Slacks"; // Only one option
      let equalities = document.getElementById("equalities").checked;
      let handlingEqualities = document.querySelector('input[name="handling_equalities"]:checked').value;
      let variableBounds = document.querySelector('input[name="variable_bounds"]:checked').value;
      const hasInequalities = inequalities !== "none";
      const hasEqualities = equalities;
      const hasBounds = variableBounds !== "none";

      let outputText = "<h3>Generated Quadratic Programming Problem</h3>";

      outputText += "<p>";
      outputText += "\\[ \\begin{align*}\n";
      outputText += "\\underset{x}{\\text{minimize}} \\quad & \\frac{1}{2} x^T Q x + c^T x\\\\";
      if (hasInequalities || hasEqualities || hasBounds) {
        outputText += "\\text{subject to} \\quad";
      }

      if (hasEqualities) {
        outputText += "& " + Aeq + x + " = " + beq + "\\\\\n"
      }

      if (hasInequalities) {
        if (inequalities === "below") outputText += "& " + Aineq + x + " \\leq " + uAineq + " \\\\\n";
        if (inequalities === "above") outputText += "& " + Aineq + x + " \\geq " + lAineq + " \\\\\n";
        if (inequalities === "both") outputText += "& " + lAineq + " \\leq " + Aineq + x + " \\leq " + uAineq + " \\\\\n";
      }

      if (variableBounds !== "none") {
        if (variableBounds === "lower") outputText += "& " + x + " \\geq " + lx + " \\\\\n";
        if (variableBounds === "upper") outputText += "& " + x + " \\leq " + ux + " \\\\\n";
        if (variableBounds === "both") outputText += "& " + lx + " \\leq " + x + " \\leq " + ux + " \\\\\n";
      }

      outputText += "\\end{align*} \\]"

      outputText += "<h3>Interior-Point Method Derivation</h3>";
      outputText += "<p>1. Optimization problem with slacks</p>";
      outputText += "<p>2. Optimization problem with barriers</p>";
      outputText += "<p>3. Lagrangian formulation</p>";
      outputText += "<p>4. First-order optimality conditions</p>";
      outputText += "<p>5. Newton system</p>";
      outputText += "<p>6. Reduction of rows for log-barriers</p>";
      outputText += "<p>7. Reduction of rows for Lagrange multipliers</p>";
      outputText += "<p>8. Augmented system and LU/LDLT solution methods</p>";
      outputText += "<p>9. Reduction to normal equations if possible</p>";

      document.getElementById("output").innerHTML = outputText;
      MathJax.typesetPromise().catch((err) => {
        console.error("MathJax error:", err);
      });
    }

    document.querySelectorAll('input').forEach(input => {
      input.addEventListener('change', updateProblem);
    });

    updateProblem();
  </script>

</body>

</html>